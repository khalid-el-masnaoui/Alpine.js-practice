<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Alpine.js Concepts</title>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.15.0/dist/cdn.min.js"
    ></script>
  </head>
  <body>
    <!--Alpine.js components with x-data-->
    <!--x-text & x-html-->
    <div
      x-data="{
        name:'malidkha', 
        message:'hey there!', 
        htmlMessage:'hey <strong>there</strong>'
    }"
    >
      <p x-text="name"></p>
      <p x-text="message"></p>
      <p x-html="htmlMessage"></p>
    </div>

    <div x-data>
      <p
        x-text="await(await fetch('https://jsonplaceholder.typicode.com/todos/1')).text()"
      ></p>
    </div>

    <!--x-data with methods-->
    <div
      x-data="{
        message:'first message (click me to change)',
        change() {
            this.message = 'updated message'
        }
    }"
    >
      <p x-text="message" @click="change()"></p>
    </div>

    <!--re-usable data-->
    <div x-data="dropdown">
      <button
        x-text="open == false ? 'open' : 'close'"
        @click="toggle()"
      ></button>
      <div x-show="open">Content...</div>
    </div>

    <div x-data="dropdown">
      <button
        x-text="open == false ? 'open' : 'close'"
        @click="toggle()"
      ></button>
      <div x-show="open">Content2...</div>
    </div>

    <!--data coming from sore-->
    <div x-data>
      <p x-text="$store.user.username"></p>
      <div>
        <p x-text="$store.user.posts[0].title"></p>
        <p x-text="$store.user.posts[0].body"></p>
      </div>

      <div>
        <p x-text="$store.user.posts[1].title"></p>
        <p x-text="$store.user.posts[1].body"></p>
      </div>
    </div>

    <!--x-init-->
    <div x-init="console.log('init')"></div>
    <div
      x-data="{
        init(){
            console.log('init-2')
        }
      }"
    ></div>

    <div
      x-data="{todo:{}}"
      x-init="todo = await(await fetch('https://jsonplaceholder.typicode.com/todos/1')).json()"
    >
      <p x-text="todo.title??'--'"></p>
    </div>

    <!--scoping-->
    <div
      x-data="{
        name: 'malidkha',
        age: 'old-soul',
        gender: 'male'
    }"
    >
      <div
        x-data="{
        name: 'malidkha-2',
        age: 'not-so-old-soul'
    }"
      >
        <div x-data="{name:'malidkha-3'}">
          <p x-text="name"></p>
          <p x-text="age"></p>
          <p x-text="gender"></p>
        </div>
      </div>
    </div>

    <!--getters & setters-->
    <div
      x-data="{
        open: false,
        get isOpen(){
            return this.open
        },
        set isOpen(open){
            this.open = open
        },
        toggle(){
            this.isOpen = !this.open
        }
    }"
    >
      <button
        x-text="open == false ? 'Open' : 'Close'"
        @click="toggle"
      ></button>
      <p x-show="open">Content</p>
    </div>

    <!--x-show & x-transition-->
    <div
      x-data="{
        open: false,
        toggle(){
            this.open = !this.open
        }
    }"
    >
      <button
        x-text="open == false ? 'Open' : 'Close'"
        @click="toggle"
      ></button>
      <p
        x-show="open"
        x-transition:enter.duration.500ms
        x-transition:leave.duration.1000ms
        x-transition.opacity
        x-transition.scale.80
      >
        Content with transition
      </p>
    </div>

    <!--x-if-->
    <div
      x-data="{
        open: false,
        toggle(){
            this.open = !this.open
        }
    }"
    >
      <button
        x-text="open == false ? 'Open' : 'Close'"
        @click="toggle"
      ></button>
      <template x-if="open">
        <p>Content with transition</p>
      </template>
    </div>

    <!--x-for-->
    <div x-data>
      <template x-for="post in $store.user.posts" :key="post.id">
        <div>
          <h2 x-text="post.title"></h2>
          <p x-text="post.body"></p>
        </div>
      </template>

      <template x-for="i in 10">
        <p x-text="i"></p>
      </template>
    </div>

    <!--x-bind-->
    <div
      x-data="{
        clicked: false,
        toggle(){
            this.clicked = !this.clicked
        }
    }"
    >
      <button x-bind:class="clicked ? 'green' : ''" @click="toggle">
        Click Me
      </button>

      <p
        :style="{
        color: clicked && 'red',
        'font-weight' : 'bold'
      }"
        :class="{green: !clicked}"
      >
        opposite color
      </p>

      <style>
        .green {
          background-color: forestgreen;
        }
      </style>
    </div>

    <!--x-bind alpine.js directives-->
    <div x-data="alpine_directive_binding">
      <button x-bind:class="clicked ? 'green' : ''" x-bind="trigger"></button>

      <p
        :style="{
        color: clicked && 'red',
        'font-weight' : 'bold'
      }"
        :class="{green: !clicked}"
      >
        opposite color
      </p>

      <style>
        .green {
          background-color: forestgreen;
        }
      </style>

      <!--alpine.bind()-->
      <div x-data="{shouldDisable: false}">
        <button x-bind="someButton">Button</button>
      </div>
    </div>

    <!--x-on-->
    <div x-data="{message:'initial'}">
      <button @click="console.log('click event')">click</button>
      <input :type="'text'" @keyup.enter="keyUpEvent" />

      <button
        :type="'button'"
        @click="message = 'selected via click'"
        @click.shift="message = 'added to selection via shift click'"
        @mousemove.shift="message = 'add to selection via mouse'"
        @mouseout="message =
        'select via mouse out'"
        x-text="message"
      ></button>
    </div>
    <div x-data @foo="console.log('Button Was Clicked via custom event!')">
      <button
        @bar.window="console.log('Button Was Clicked via custom event-sibling!')"
      >
        need-window-for-propagation
      </button>
      <button
        @click="$event.target.dispatchEvent(new CustomEvent('foo', { bubbles: true}))"
      >
        custom-event-1
      </button>

      <button
        @click="$event.target.dispatchEvent(new CustomEvent('bar', { bubbles: true}))"
      >
        custom-event-2-sibling
      </button>

      <input :type="'text'" @input.once="console.log('once')" />
      <input
        :type="'test'"
        :placeholder="'debounced'"
        @input.debounce.750="console.log('debounced')"
      />
      <input
        :type="'test'"
        :placeholder="'throttle'"
        @input.throttle.750="console.log('throttled')"
      />
    </div>

    <div x-data="{modal:false}">
      <button @click="modal=true">show</button>
      <button x-show="modal" @click.outside="modal=false">content</button>
    </div>

    <!--$dispatch-->

    <div
      x-data
      @foo2="console.log('Button Was Clicked via custom event!', $event.detail.foo)"
    >
      <button
        @bar2.window="console.log('Button Was Clicked via custom event-sibling!', $event.detail.bar)"
      >
        need-window-for-propagation
      </button>
      <button @click="$dispatch('foo2', { foo: 'bar' })">custom-event-2</button>
      <button @click="$dispatch('bar2', { bar: 'foo' })">
        custom-event-2-sibling
      </button>
    </div>

    <div x-data="{ title: 'Hello' }" @set-title.window="title = $event.detail">
      <h1 x-text="title"></h1>
    </div>

    <div x-data>
      <button @click="$dispatch('set-title', 'Hello World!')">Click me</button>
    </div>

    <div x-data="{ title: 'Hello' }">
      <span x-model="title">
        <button @click="$dispatch('input', 'Hello World!')">Click me</button>
        <p x-text="title"></p>
        <!-- After the button is pressed, `x-model` will catch the bubbling "input" event, and update title. -->
      </span>
    </div>

    <!--x-model-->
    <div x-data="{message:'dd'}">
      <input :type="'text'" x-model.lazy="message" />

      <span
        :style="{color:'red'}"
        x-text="'invalid'"
        x-show="message.length < 5 ? true : false"
      ></span>
      <p x-text="message"></p>
    </div>

    <!--x-effect-->
    <div x-data="{name:'malidkha'}" x-effect="console.log(name)">
      <p x-text="name"></p>
      <input :type="'text'" x-model="name" />
    </div>

    <!--x-ignore--->
    <div x-data="{ label: 'From Alpine' }">
      <div x-ignore>
        <span x-text="label">hey</span>
      </div>
    </div>

    <!--x-ref & $ref-->
    <div x-data>
      <button @click="$refs.title.remove()">remove hey!</button>
      <span x-ref="title"> hey </span>

      <input :type="'text'" x-ref="title2" />
      <button @click="$refs.title2.style.backgroundColor='gray'">
        change background-color to gray
      </button>
    </div>

    <!--x-cloak-->
    <div x-data>
      <span x-cloak x-show="false">wont blip</span>
    </div>
    <style>
      [x-cloak] {
        display: none !important;
      }
    </style>

    <!--x-teleport-->
    <div x-data="{open:false}">
      <button @click="open=true">show modal</button>
      <span>content-1</span>
      <template x-teleport="body">
        <span x-show="open"> modal-content</span>
      </template>
      <span>content-2</span>
    </div>

    <!--$el-->
    <div x-data>
      <button @click="$el.innerHTML = 'Hello World!'">
        Replace me with "Hello World!"
      </button>
    </div>

    <div x-data="{ username: 'malidkha' }">
      <div x-ref="div" x-model="username"></div>

      <button @click="$refs.div._x_model.set('khalid')">
        Change username to: 'khalid'
      </button>

      <span x-text="$refs.div._x_model.get()"></span>
    </div>
  </body>
  <script src="app.js"></script>
  <script>
    function keyUpEvent(e) {
      console.log("keyup-enter-event");
    }
  </script>
</html>
