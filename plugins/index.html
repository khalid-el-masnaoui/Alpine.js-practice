<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Alpine.js plugins</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <!--mask-->
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/@alpinejs/mask@3.x.x/dist/cdn.min.js"
    ></script>

    <!--intersect-->
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/@alpinejs/intersect@3.x.x/dist/cdn.min.js"
    ></script>

    <!--persist-->
    <!--not deferred => used in app.js -->
    <script src="https://cdn.jsdelivr.net/npm/@alpinejs/persist@3.x.x/dist/cdn.min.js"></script>

    <!--collapse-->
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/@alpinejs/collapse@3.x.x/dist/cdn.min.js"
    ></script>

    <!--anchor-->
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/@alpinejs/anchor@3.x.x/dist/cdn.min.js"
    ></script>

    <!--sort-->
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/@alpinejs/sort@3.x.x/dist/cdn.min.js"
    ></script>

    <!--alpine core-->
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.15.0/dist/cdn.min.js"
    ></script>

    <style>
      .sortable-ghost {
        opacity: 0.5 !important;
      }
    </style>
  </head>
  <body>
    <div class="py-20 w-[80%] m-auto">
      <!--mask-->

      <div x-data>
        <!--date-->
        <div>
          <label for="date"> date</label>
          <input
            id="date"
            x-mask="9999-99-99"
            placeholder="YYYY-MM-DD"
            class="text-[0.8rem] text-gray-500 border-[1px] border-gray-300 rounded-md outline-none px-1"
          />
        </div>

        <!--dynamic date-->
        <div class="py-5">
          <label for="dynamic-date">Dynamic date</label>
          <input
            id="dynamic-date"
            x-mask:dynamic="
        $input.startsWith('34') || $input.startsWith('37')
        ? '9999 999999 99999' : '9999 9999 9999 9999'"
            class="text-[0.8rem] text-gray-500 border-[1px] border-gray-300 rounded-md outline-none px-1"
          />
        </div>

        <!--money-->
        <div>
          <label for="money">Balance</label>
          <input
            id="money"
            x-mask:dynamic="$money($input)"
            class="text-[0.8rem] text-gray-500 border-[1px] border-gray-300 rounded-md outline-none px-1"
          />
        </div>

        <!--money custom formatting-->
        <div class="py-5">
          <label for="custom-money">Balance</label>
          <input
            id="custom-money"
            x-mask:dynamic="$money($input, '.', ',', 4)"
            class="text-[0.8rem] text-gray-500 border-[1px] border-gray-300 rounded-md outline-none px-1"
          />
        </div>
      </div>

      <!--persist-->
      <div>
        <!--persist globally with $store-->
        <div
          x-data="{
            updatedName : 'update name and press enter2',
        }"
          class="py-20"
        >
          <div class="flex flex-col items-start justify-center">
            <input
              type="text"
              x-model="updatedName"
              class="bg-gray-200 text-xs text-gray-600 border-[1px] border-gray-400 rounded-md outline-none px-1 h-5"
              @keyup.enter="$store.persistentName.name = updatedName"
            />
            <div class="text-sm">
              Name : <span x-text="$store.persistentName.name"></span>
            </div>
          </div>
        </div>
        <!--persist within components-->
        <div x-data="{ count: $persist(0) }">
          <button
            x-on:click="count++"
            class="text-xs bg-gray-100 hover:bg-gray-200 text-gray-500 font-medium cursor-pointer border-[1px] border-gray-100 rounded-md px-2"
          >
            Increment
          </button>

          <span x-text="count"></span>
        </div>

        <!--persist with custom key in sessionStorage-->
        <div
          x-data="{ count: $persist(0).as('session-storage-count').using(sessionStorage) }"
        >
          <button
            x-on:click="count++"
            class="text-xs bg-gray-100 hover:bg-gray-200 text-gray-500 font-medium cursor-pointer border-[1px] border-gray-100 rounded-md px-2"
          >
            Increment Into SessionStorage
          </button>

          <span x-text="count"></span>
        </div>
      </div>

      <!--collapse-->
      <div class="py-20">
        <div x-data="{ expanded: false }">
          <button
            @click="expanded = ! expanded"
            class="text-xs bg-gray-100 hover:bg-gray-200 text-gray-500 font-medium cursor-pointer border-[1px] border-gray-100 rounded-md px-2"
          >
            Toggle Content
          </button>

          <p x-show="expanded" x-collapse class="text-xs text-gray-500">
            Autem nihil magnam sed voluptas velit eum suscipit. Error quasi
            repudiandae. Reprehenderit explicabo minus voluptate dolorem veniam
            sit rerum aspernatur. Et debitis occaecati ipsa molestias
            repellendus id repellat autem. Maiores ut rerum iure inventore
            dolores ipsum.
          </p>
        </div>

        <!--show partial data from the collapsible element-->
        <div x-data="{ expanded: false }" class="pt-5">
          <button
            @click="expanded = ! expanded"
            class="text-xs bg-gray-100 hover:bg-gray-200 text-gray-500 font-medium cursor-pointer border-[1px] border-gray-100 rounded-md px-2"
          >
            Toggle Content
          </button>

          <p
            x-show="expanded"
            x-collapse.min.25px
            class="text-xs text-gray-500"
          >
            Ea sed praesentium consequuntur rerum delectus porro. Laudantium
            temporibus temporibus voluptatem sed nesciunt. Libero necessitatibus
            qui sunt harum esse omnis. Sed consequatur illo qui tempora dolorum
            quasi ut. Molestiae earum doloribus eos numquam error esse sed ullam
            exercitationem.
          </p>
        </div>
      </div>

      <!--anchor-->
      <div>
        <div x-data="{ open: false }">
          <button
            x-ref="button"
            @click="open = ! open"
            class="text-xs bg-gray-100 hover:bg-gray-200 text-gray-500 font-medium cursor-pointer border-[1px] border-gray-100 rounded-md px-2"
          >
            Toggle
          </button>

          <div
            x-show="open"
            x-anchor.offset.10.right-start="$refs.button"
            class="bg-gray-100 text-xs text-gray-500 px-2 py-2 rounded-md"
          >
            Dropdown content
          </div>
        </div>

        <!--manual styling-->
        <div x-data="{ open: false }">
          <button
            x-ref="button"
            @click="open = ! open"
            class="text-xs bg-gray-100 hover:bg-gray-200 text-gray-500 font-medium cursor-pointer border-[1px] border-gray-100 rounded-md px-2"
          >
            Toggle
          </button>

          <div
            x-show="open"
            class="bg-gray-100 text-xs text-gray-500 px-2 py-2 rounded-md"
            x-anchor.no-style="$refs.button"
            x-bind:style="{ position: 'absolute', top: $anchor.y+'px', left: $anchor.x+'px' }"
          >
            Dropdown content
          </div>
        </div>
      </div>

      <!--sort-->
      <div
        x-data="{ handle: (item, position) => { console.log(item, position) } }"
        class="py-20"
      >
        <div>
          <ul x-sort="handle">
            <li x-sort:item="1">foo</li>
            <li x-sort:item="2">bar</li>
            <li x-sort:item="3">baz</li>
          </ul>
        </div>

        <!--groups-->
        <div class="pt-5">
          <ul x-sort="handle" x-sort:group="todos">
            <li x-sort:item="1">foo</li>
            <li x-sort:item="2">bar</li>
            <li x-sort:item="3">baz</li>
          </ul>

          <div>--------------------------</div>
          <ol x-sort="handle" x-sort:group="todos">
            <li x-sort:item="4"><span x-sort:handle> ** </span> foo</li>
            <li x-sort:item="5"><span x-sort:handle> ** </span> bar</li>
            <li x-sort:item="6"><span x-sort:handle> ** </span> baz</li>
          </ol>
        </div>

        <!--ghost elements-->
        <div class="pt-5">
          <ul x-sort.ghost="handle">
            <li x-sort:item="1">foo</li>
            <li x-sort:item="2">bar</li>
            <li x-sort:item="3">baz</li>
          </ul>
        </div>
      </div>

      <!--intersect-->
      <div x-data="intersectComponent" class="py-20">
        <button
          class="text-xs bg-gray-100 hover:bg-gray-200 text-gray-500 font-medium cursor-pointer border-[1px] border-gray-100 rounded-md px-2"
        >
          Scroll Down
        </button>
        <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />

        <!--animatedText-->
        <div
          x-intersect.half="showAnimatedText = true"
          x-intersect:leave.margin.-100px="showAnimatedText = false"
        >
          <div x-show="showAnimatedText" x-transition.duration.300ms>
            Animated text when scroll into it
          </div>
        </div>

        <!--lazy loading image-->
        <div
          x-intersect.margin.10px="lazyLoad"
          x-intersect:leave.margin.-200px="lazyLoadImage = false"
        >
          <img
            x-show="lazyLoadImage"
            x-transition.duration.300ms
            :src="lazyImageLink"
            alt=""
          />
        </div>

        <!--infinite scrolling-->
        <div x-intersect:leave.margin.-200px="addContent">
          <div x-html="infiniteScrollingHtmlContent"></div>
        </div>
      </div>
    </div>

    <script src="./app.js"></script>
  </body>
</html>
